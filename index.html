<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YB Watches | Ø§Ù„ÙØ®Ø§Ù…Ø© ÙˆØ§Ù„Ø¯Ù‚Ø©</title>
    <meta name="theme-color" content="#000000">

    <!-- Ø®Ø·ÙˆØ· Ø¹Ø±Ø¨ÙŠØ© ÙˆØ£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --gold: #d4af37;
            --gold-light: #f3e5ab;
            --black: #0a0a0a;
            --dark-gray: #1a1a1a;
            --text-light: #f0f0f0;
            --whatsapp: #25D366;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Tajawal', sans-serif; }

        body {
            background-color: var(--black);
            color: var(--text-light);
            overflow-x: hidden;
        }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„ÙØ§Ø®Ø± --- */
        header {
            background: rgba(10, 10, 10, 0.95);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .brand {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: var(--gold);
            letter-spacing: 3px;
            text-transform: uppercase;
            border: 2px solid var(--gold);
            padding: 5px 20px;
            display: inline-block;
        }
        
        .slogan { font-size: 0.9rem; color: #888; margin-top: 5px; letter-spacing: 1px; }

        /* --- Ø§Ù„Ø­Ø§ÙˆÙŠØ© ÙˆØ§Ù„Ø´Ø¨ÙƒØ© --- */
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            padding-bottom: 50px;
        }

        /* --- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù†ØªØ¬ --- */
        .card {
            background: var(--dark-gray);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #333;
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .card:hover {
            transform: translateY(-10px);
            border-color: var(--gold);
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.15);
        }

        .img-container {
            height: 300px;
            background: #222;
            overflow: hidden;
            position: relative;
        }

        .img-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .card:hover .img-container img { transform: scale(1.1); }

        .card-body { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }

        .card-title { font-size: 1.2rem; font-weight: 700; margin-bottom: 10px; color: #fff; }
        
        .card-desc { 
            font-size: 0.9rem; color: #aaa; margin-bottom: 15px; flex-grow: 1; 
            display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
        }

        .card-price {
            font-size: 1.4rem; color: var(--gold); font-weight: 800; margin-bottom: 15px; display: block;
        }

        .btn-add {
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 12px;
            width: 100%;
            font-weight: bold;
            cursor: pointer;
            border-radius: 6px;
            transition: 0.3s;
        }

        .btn-add:hover { background: var(--gold); color: var(--black); }

        /* --- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨ --- */
        .order-section {
            background: var(--dark-gray);
            padding: 30px;
            border-radius: 15px;
            border-top: 4px solid var(--gold);
            margin-top: 20px;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
        }

        .section-title { text-align: center; margin-bottom: 30px; color: var(--gold); font-size: 1.8rem; }

        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #ccc; }
        
        .form-group input, .form-group textarea {
            width: 100%; padding: 15px;
            background: #0a0a0a; border: 1px solid #333; color: white;
            border-radius: 8px; font-size: 1rem;
        }

        .form-group input:focus { border-color: var(--gold); outline: none; }

        #location-btn {
            background: #e67e22; color: white; border: none; padding: 15px;
            width: 100%; border-radius: 8px; cursor: pointer; display: flex;
            align-items: center; justify-content: center; gap: 10px; font-size: 1rem;
        }

        #whatsapp-btn {
            background: var(--whatsapp); color: white; border: none; padding: 18px;
            width: 100%; border-radius: 8px; cursor: pointer; font-size: 1.2rem;
            font-weight: bold; margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        
        #whatsapp-btn:hover { background: #1ebe57; }

        /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø­Ø§Ù„Ø© */
        .status-msg { text-align: center; padding: 40px; color: #888; font-size: 1.2rem; }
        .loading-spinner { border: 4px solid #333; border-top: 4px solid var(--gold); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ø¤Ù‚ØªØ§ */
        .hidden { display: none; }

    </style>
</head>
<body>

<header>
    <div class="brand">YB</div>
    <div class="slogan">LUXURY TIMEPIECES</div>
</header>

<div class="container">
    <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
    <div id="loader" class="status-msg">
        <div class="loading-spinner"></div>
        Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø­ØµØ±ÙŠØ©...
    </div>
    
    <div id="error-box" class="status-msg hidden" style="color: #ff5555;"></div>

    <div class="products-grid" id="products-container"></div>
</div>

<!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø·Ù„Ø¨ -->
<div class="container hidden" id="order-container">
    <div class="order-section">
        <h2 class="section-title">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h2>
        
        <div class="form-group">
            <label>Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø®ØªØ§Ø±:</label>
            <input type="text" id="selected-product" readonly style="color: var(--gold); font-weight: bold; border-color: var(--gold);">
        </div>

        <div class="form-group">
            <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label>
            <input type="text" id="name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…">
        </div>

        <div class="form-group">
            <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
            <input type="tel" id="phone" placeholder="07xxxxxxxxx">
        </div>

        <div class="form-group">
            <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„:</label>
            <button type="button" id="location-btn" onclick="getGPS()">
                <i class="fas fa-map-marker-alt"></i> ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (GPS)
            </button>
            <div id="location-status" style="text-align: center; margin-top: 10px; font-size: 0.9rem; color: #aaa;"></div>
            <input type="hidden" id="geo-link">
        </div>

        <div class="form-group">
            <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:</label>
            <textarea id="notes" rows="3" placeholder="ØªÙØ§ØµÙŠÙ„ Ø£Ø®Ø±Ù‰..."></textarea>
        </div>

        <button id="whatsapp-btn" onclick="sendOrder()">
            <i class="fab fa-whatsapp"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†
        </button>
    </div>
</div>

<script>
    // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ---
    // ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…Ø¹Ø±Ù Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø°ÙŠ Ø£Ø±Ø³Ù„ØªÙ‡ (ID)
    const SHEET_ID = "2PACX-1vTMFYLXX8QRtMctQ5g4A21ftngOtMfKmBpbBpA7T4aDAhwKoRxYJ-JtWjRylqV1dpg0Lyjoj4JEmAJH";
    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ø·Ù„Ø¨ CSV Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† HTML
    const CSV_URL = `https://docs.google.com/spreadsheets/d/e/${SHEET_ID}/pub?output=csv`;
    
    const PHONE_NUMBER = "9647858644168"; // Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨

    // --- Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ---
    window.addEventListener('DOMContentLoaded', () => {
        fetchData();
    });

    // --- Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ---
    async function fetchData() {
        try {
            const response = await fetch(CSV_URL);
            if (!response.ok) throw new Error("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
            
            const data = await response.text();
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¬ÙˆØ¬Ù„ ÙŠØ¹ÙŠØ¯ ØµÙØ­Ø© Ø®Ø·Ø£ HTML Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if(data.trim().startsWith("<!DOCTYPE html>")) {
                throw new Error("ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­. ØªØ£ÙƒØ¯ Ù…Ù† Ù†Ø´Ø± Ø§Ù„Ø´ÙŠØª Ø¨ØµÙŠØºØ© CSV.");
            }

            renderProducts(data);

        } catch (error) {
            document.getElementById('loader').classList.add('hidden');
            const errBox = document.getElementById('error-box');
            errBox.classList.remove('hidden');
            errBox.innerHTML = `âš ï¸ Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£:<br>${error.message}<br><br>ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø´Ø± ÙÙŠ Google Sheet.`;
        }
    }

    // --- Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ---
    function renderProducts(csvText) {
        const rows = csvText.split('\n').slice(1); // Ø­Ø°Ù Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ (Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†)
        const container = document.getElementById('products-container');
        document.getElementById('loader').classList.add('hidden');

        if(rows.length === 0) {
            container.innerHTML = '<p class="status-msg">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>';
            return;
        }

        rows.forEach(row => {
            // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù†Øµ Ù…Ø¹ Ù…Ø±Ø§Ø¹Ø§Ø© Ø§Ù„ÙÙˆØ§ØµÙ„ Ø¯Ø§Ø®Ù„ Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªÙ†ØµÙŠØµ
            const cols = row.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);
            
            if (cols && cols.length >= 2) {
                // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const clean = (str) => str ? str.replace(/^"|"$/g, '').trim() : '';
                
                // Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©: [0]Ø§Ù„Ø§Ø³Ù…ØŒ [1]Ø§Ù„Ø³Ø¹Ø±ØŒ [2]Ø§Ù„ØµÙˆØ±Ø©ØŒ [3]Ø§Ù„ÙˆØµÙ
                const name = clean(cols[0]);
                const price = clean(cols[1]);
                let img = clean(cols[2]);
                const desc = clean(cols[3] || "Ø³Ø§Ø¹Ø© ÙØ§Ø®Ø±Ø©");

                // ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø­Ù‚Ù„ ÙØ§Ø±ØºØ§Ù‹
                if(img.length < 5) img = "https://images.unsplash.com/photo-1522312346375-d1a52e2b99b3?auto=format&fit=crop&w=600&q=80";

                const cardHTML = `
                    <div class="card">
                        <div class="img-container">
                            <img src="${img}" alt="${name}" loading="lazy" onerror="this.src='https://via.placeholder.com/300x300?text=YB+Watches'">
                        </div>
                        <div class="card-body">
                            <h3 class="card-title">${name}</h3>
                            <p class="card-desc">${desc}</p>
                            <span class="card-price">${price}</span>
                            <button class="btn-add" onclick="selectProduct('${name} - ${price}')">
                                Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© <i class="fas fa-shopping-bag"></i>
                            </button>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', cardHTML);
            }
        });
    }

    // --- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†ØªØ¬ ---
    function selectProduct(productInfo) {
        const orderSection = document.getElementById('order-container');
        document.getElementById('selected-product').value = productInfo;
        
        orderSection.classList.remove('hidden');
        orderSection.scrollIntoView({ behavior: 'smooth' });
    }

    // --- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ (GPS) ---
    function getGPS() {
        const btn = document.getElementById('location-btn');
        const status = document.getElementById('location-status');

        if (!navigator.geolocation) {
            status.innerHTML = "Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹.";
            return;
        }

        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ¯...';

        navigator.geolocation.getCurrentPosition(
            (position) => {
                const lat = position.coords.latitude;
                const long = position.coords.longitude;
                const link = `https://www.google.com/maps?q=${lat},${long}`;
                
                document.getElementById('geo-link').value = link;
                status.innerHTML = `<span style="color:#2ecc71">âœ… ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­!</span>`;
                btn.innerHTML = '<i class="fas fa-check"></i> ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ¯';
                btn.style.background = "#2ecc71";
            },
            (error) => {
                status.innerHTML = `<span style="color:#ff5555">âŒ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹. ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù€ GPS.</span>`;
                btn.innerHTML = 'Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©';
                btn.style.background = "#e67e22";
            },
            { enableHighAccuracy: true }
        );
    }

    // --- Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨ ---
    function sendOrder() {
        const product = document.getElementById('selected-product').value;
        const name = document.getElementById('name').value;
        const phone = document.getElementById('phone').value;
        const notes = document.getElementById('notes').value;
        const geo = document.getElementById('geo-link').value;

        if(!product) { alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø³Ø§Ø¹Ø© Ø£ÙˆÙ„Ø§Ù‹"); return; }
        if(!name) { alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù…"); return; }
        if(!phone) { alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"); return; }

        let msg = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…ÙˆÙ‚Ø¹ YB* ğŸ›ï¸%0a`;
        msg += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”%0a`;
        msg += `âŒš *Ø§Ù„Ù…Ù†ØªØ¬:* ${product}%0a`;
        msg += `ğŸ‘¤ *Ø§Ù„Ø§Ø³Ù…:* ${name}%0a`;
        msg += `ğŸ“± *Ø§Ù„Ù‡Ø§ØªÙ:* ${phone}%0a`;
        
        if(geo) msg += `ğŸ“ *Ø§Ù„Ù…ÙˆÙ‚Ø¹:* ${geo}%0a`;
        else msg += `ğŸ“ *Ø§Ù„Ù…ÙˆÙ‚Ø¹:* (Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ¯)%0a`;

        if(notes) msg += `ğŸ“ *Ù…Ù„Ø§Ø­Ø¸Ø§Øª:* ${notes}%0a`;
        msg += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”`;

        window.open(`https://wa.me/${PHONE_NUMBER}?text=${msg}`, '_blank');
    }
</script>

</body>
</html>
